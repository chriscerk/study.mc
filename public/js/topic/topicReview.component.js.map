{"version":3,"sources":["topic/topicReview.component.ts"],"names":[],"mappings":"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","file":"topic/topicReview.component.js","sourcesContent":["import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Subscription } from 'rxjs/Subscription';\r\n\r\nimport { ITopic } from '../shared/interfaces';\r\nimport { DataService } from '../core/services/data.service';\r\nimport { nextPrevAnimation } from '../shared/animations';\r\n\r\ntype Orientation = ( \"void\" | \"next\" | \"none\" | \"previous\" );\r\n\r\n@Component({\r\n  //moduleId: module.id,\r\n  selector: 'topic-review',\r\n  animations: [nextPrevAnimation],\r\n  template: `\r\n<div *ngIf=\"topic\">\r\n<div class=\"review-print-hide\">\r\n  <h1><b>Review</b> of {{topic.name}}</h1>\r\n  <div class=\"alert alert-info review-alert\" role=\"alert\" style=\"display:none;\">\r\n    <a href=\"#\" class=\"alert-link\">Autofill only on mobile device.</a>\r\n      <div class=\"action-buttons\">\r\n        <div class=\"shaded\">\r\n          <button type=\"button\" class=\"btn btn-success shaded\" (click)=\"generateExampleReview()\"> Autofill </button>\r\n        </div>\r\n      </div>\r\n  </div>\r\n  <p class=\"advice\">Please fill each section of the review. Below is a generated review worksheet, printable upon completion. <a href=\"/studymc-media/savePDF-HowTo-studymc.mp4\">How to Save Review Worksheet as a PDF Video</a></p>\r\n<div class=\"content review-module\">\r\n  <form #f=\"ngForm\" (ngSubmit)=\"onSubmit()\" method=\"post\">\r\n\r\n      <div class=\"action-buttons shaded\">\r\n        <div class=\"shaded\">\r\n          <button type=\"button\" class=\"btn btn-default shaded\" (click)=\"generateExampleReview()\"> Autofill </button>\r\n        </div>\r\n        <br>\r\n         <div class=\"shaded\">\r\n          <button type=\"button\" class=\"btn btn-default\" (click)=\"toPreviousItem()\"> Previous </button>\r\n         </div>\r\n          <br>\r\n         <div class=\"shaded\">\r\n          <button type=\"button\" class=\"btn btn-default\" *ngIf=\"reviewComplete\" (click)=\"toNextItem()\"> Next </button>\r\n         </div>\r\n            <br>\r\n            <button type=\"submit\" class=\"btn btn-success\" *ngIf=\"!reviewComplete\" (click)=\"toNextItem()\"> Next </button>\r\n            <button type=\"submit\" class=\"btn btn-success\" *ngIf=\"reviewComplete\" (click)=\"printPage()\"> Print! </button>\r\n        </div>\r\n\r\n  <div *ngFor=\"let reviewItem of topic.reviewItems; let i = index\" [@NextPrevAnimation]=\"orientation\">\r\n    <div *ngIf=\"currentItem == i\">    \r\n        <h2>Section {{i+1}}: {{reviewItem.title}}</h2> \r\n\r\n        <ul class=\"flex-container\">\r\n          <li *ngFor=\"let section of reviewItem.sections; let j = index\">\r\n            <div class=\"input-group input-group-lg\">\r\n              <input type=\"text\" \r\n                      class=\"form-control\" \r\n                      [(ngModel)]=\"section.title\" \r\n                      aria-describedby=\"basic-addon1\" \r\n                      name=\"sectionTitle{{j}}\" \r\n                      required>\r\n              <br>\r\n              <div *ngIf=\"section.imagePath\">\r\n                <img src=\"/studymc-media/compounds/{{topic.name}}/{{section.imagePath}}\" id=\"logo\" alt=\"{{section.imagePath}}\" style=\"max-width: 150px;\">\r\n              </div>\r\n              <div *ngIf=\"!section.imagePath\">\r\n                <textarea class=\"form-control\" \r\n                          [(ngModel)]=\"section.content\" \r\n                          name=\"sectionContent{{j}}\" \r\n                          rows=\"10\" rows=\"5\" \r\n                          id=\"comment\" \r\n                          required>\r\n                </textarea>\r\n                </div>\r\n              <br>\r\n            </div>\r\n            <br>\r\n          </li>\r\n        </ul>\r\n\r\n      </div>\r\n  </div>\r\n  <div class=\"input-group input-group-lg\">\r\n          <label for=\"studentName\">Your Name: </label>\r\n          <input type=\"text\" class=\"form-control\" [(ngModel)]=\"studentName\" name=\"studentName\" required>\r\n  </div>\r\n  <div *ngIf=\"!topic.reviewItems.length\">\r\n        <div class=\"alert alert-info review-alert\" role=\"alert\">\r\n          <a href=\"#\" class=\"alert-link\"> There is currently no Review for {{topic.name}}.</a>\r\n        </div>\r\n  </div>\r\n  <hr>\r\n    <h2 style=\"text-align: center\"> Preview Below &nbsp;  <span class=\"glyphicon glyphicon-arrow-down\"></span></h2> \r\n  <hr>\r\n  </form>\r\n </div>\r\n</div>\r\n  <h1 style=\"text-align: center;\">Review of <strong>{{topic.name}}</strong> | {{studentName}} </h1>\r\n    <ul class=\"flex-container\">\r\n        <li *ngFor=\"let reviewItem of topic.reviewItems;\" class=\"flex-item review-print-item\">\r\n            <h3><strong>{{reviewItem.title}}</strong></h3>\r\n\r\n            <ul class=\"flex-container\" style=\"border: solid #afafaf; border-width: 1px; border-radius: 10px;\">\r\n              <li *ngFor=\"let section of reviewItem.sections\" style=\"width: 250px; padding: 3px;\">\r\n                <h4>{{section.title}}</h4>\r\n                <p class=\"review\">{{section.content}}</p>\r\n                <div *ngIf=\"section.imagePath\">\r\n                  <img src=\"/studymc-media/compounds/{{topic.name}}/{{section.imagePath}}\" id=\"logo\" alt=\"{{section.imagePath}}\" style=\"max-width: 150px;\">\r\n                </div>  \r\n              </li>\r\n            </ul>\r\n      </li>\r\n    </ul>\r\n</div>\r\n\r\n<div *ngIf=\"!topic\" class=\"row\">\r\nNo topic found\r\n</div> \r\n`\r\n})\r\n\r\n//For each item in the review sheet provide a userSubmission. Items should be userProvided or fixed\r\n\r\nexport class TopicReviewComponent implements OnInit {\r\n\r\n  topic: ITopic;\r\n  private sub: Subscription;\r\n  router: Router;\r\n\r\n  studentName: string;\r\n  currentItem: number;\r\n  nextItem:number;\r\n  lastItem:number;\r\n  printingOptionsVisible: boolean;\r\n  reviewComplete: boolean;\r\n\r\n  public orientation: Orientation;\r\n\r\n  constructor(private route: ActivatedRoute, router: Router, private dataService: DataService, private changeDetectorRef: ChangeDetectorRef) {\r\n      this.router = router;\r\n      this.studentName = \"\";\r\n      this.currentItem = 0;\r\n      this.nextItem = 1;\r\n      this.printingOptionsVisible = false;\r\n      this.reviewComplete = false;\r\n      this.changeDetectorRef = changeDetectorRef;\r\n   } \r\n\r\n  ngOnInit() {\r\n      this.sub = this.route.parent.params.subscribe(params => {\r\n        let id = +params['id'];\r\n        this.dataService.getTopic(id)\r\n            .subscribe((topic: ITopic) => this.topic = topic);\r\n      });\r\n\r\n      this.lastItem = this.topic.reviewItems.length - 1;\r\n      this.orientation = \"void\";\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.sub.unsubscribe();\r\n  }\r\n\r\n  toNextItem() {\r\n    this.orientation = \"next\";\r\n    this.changeDetectorRef.detectChanges();\r\n\r\n    if(this.currentItem == this.lastItem)\r\n    {\r\n        this.currentItem = 0;\r\n    }\r\n    else if(this.nextItem == this.lastItem)\r\n    {\r\n      this.reviewComplete = true;\r\n      this.currentItem++;\r\n    }\r\n    else{\r\n      this.currentItem++;\r\n    }\r\n    this.nextItem = this.currentItem + 1;\r\n    this.orientation = \"void\";\r\n  }\r\n\r\n  toPreviousItem() {\r\n    this.orientation = \"previous\";\r\n    this.changeDetectorRef.detectChanges();\r\n\r\n    if(this.currentItem == 0)\r\n    {\r\n      this.currentItem = this.lastItem;\r\n    }\r\n    else{\r\n      this.currentItem--;\r\n    }\r\n    this.nextItem = this.currentItem + 1;\r\n    this.orientation = \"void\";\r\n  }\r\n\r\n  printPage() {\r\n    window.print();\r\n  }\r\n\r\n  generateExampleReview() {\r\n    this.topic.reviewItems = this.topic.exampleReview;\r\n    this.studentName = \"MC Student\";\r\n    this.reviewComplete = true;\r\n  }\r\n\r\n\r\n  togglePrintingOptions(){\r\n    this.printingOptionsVisible = !this.printingOptionsVisible;\r\n  }\r\n\r\n}"],"sourceRoot":"/source/"}